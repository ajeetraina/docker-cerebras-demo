- name: docker
  tools:
    - name: docker
      description: use the docker cli
      parameters:
        type: object
        properties:
          args:
            type: array
            description: Arguments to pass to the Docker command
            items:
              type: string
      container:
        image: docker@sha256:3a861ec98623bd6014610291123751dc19e0c6d474ac3b38767771791ac0eb5e
        command:
          - "{{args|into}}"
        volumes:
          - "/var/run/docker.sock:/var/run/docker.sock"

- name: SQLite
  tools:
    - name: read-query
      description: Execute a SELECT query on the SQLite database
      parameters:
        type: object
        properties:
          query:
            type: string
            description: SELECT SQL query to execute
      container: &sqlite-container
        image: &sqlite-image vonwig/sqlite@sha256:c3b7f2dd5cb3ec2cf3789ff2303406fa6130b6ffe7844877ef0e251721957cd7
        command:
          - &db "/mcp/test1.db"
          - "{{query|safe}}"
        volumes: &mounts
          - "mcp-test:/mcp"
      source: &sqlite-source
        url: https://github.com/docker/labs-ai-tools-for-devs/tree/main/functions/sqlite
    - name: write-query
      description: Execute an INSERT, UPDATE, or DELETE query on the SQLite database
      parameters:
        type: object
        properties:
          query:
            type: string
            description: SQL query to execute
      container: *sqlite-container
      source: *sqlite-source
    - name: create-table
      description: Create a new table in the SQLite database
      parameters:
        type: object
        properties:
          query:
            type: string
            description: CREATE TABLE SQL statement
      container: *sqlite-container
      source: *sqlite-source
    - name: list-tables
      description: List all tables in the SQLite database
      container:
        image: *sqlite-image
        command:
          - *db
          - "SELECT name from sqlite_master WHERE type='table'"
        volumes: *mounts
      source: *sqlite-source
    - name: describe-table
      description: Get the schema information for a specific table
      parameters:
        type: object
        properties:
          table_name:
            type: string
            description: Name of the table to describe
      container:
        image: *sqlite-image
        command:
          - *db
          - "PRAGMA table_info({{table_name}})"
        volumes: *mounts
      source: *sqlite-source
    - name: append-insight
      description: Add a business insight to the memo
      parameters:
        type: object
        properties:
          insight:
            type: string
            description: Business insight discovered from data analysis
      container:
        image: vonwig/bash_alpine@sha256:8641ba06905e61694fef75adedc071b1abfc11f2edb94a744de98ea643f55ad1
        command:
          - "-c"
          - "echo '{{insight|safe}}' >> /thread/insights.txt"
        volumes: *mounts
      source: *sqlite-source
  resources:
    - name: Business Insights Memo
      description: A living document of discovered business insights
      uri: memo://insights
      mimeType: text/plain
      matches: resource:///thread/insights.txt
      default:
        text: "No business insights have been discovered yet."
  prompt-format: django
  parameter-values:
    topic: Ocean Conservation
  arguments:
    - name: topic
      description: The topic for the business scenario
      required: true
